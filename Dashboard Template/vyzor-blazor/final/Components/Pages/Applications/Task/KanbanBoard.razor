@page "/applications/task/kanbanboard"
@using Soenneker.Blazor.FilePond
@using Soenneker.Blazor.FilePond.Options
@using Soenneker.Blazor.FilePond.Dtos
@using Soenneker.Blazor.FilePond.Enums
@using Soenneker.Blazor.TomSelect
@using Soenneker.Blazor.TomSelect.Configuration
@using Soenneker.Blazor.TomSelect.Enums
@using FlatpickrBlazor
@using FlatpickrBlazor.Components
@inject Microsoft.AspNetCore.Components.NavigationManager NavigationManager

<link rel="stylesheet" href="@($"{NavigationManager.BaseUri}assets/libs/dragula/dragula.min.css")">

<!-- Start::page-header -->
<div class="page-header-breadcrumb mb-3">
    <div class="d-flex align-center justify-content-between flex-wrap">
        <h1 class="page-title fw-medium fs-18 mb-0">Kanban Board</h1>
        <ol class="breadcrumb mb-0">
            <li class="breadcrumb-item"><a href="javascript:void(0);">Apps</a></li>
            <li class="breadcrumb-item"><a href="javascript:void(0);">Task</a></li>
            <li class="breadcrumb-item active" aria-current="page">Kanban Board</li>
        </ol>
    </div>
</div>
<!-- End::page-header -->

<!-- Start:: row-1 -->
<div class="row">
    <div class="col-xl-12">
        <div class="card custom-card">
            <div class="card-body p-3">
                <div class="d-sm-flex align-items-center flex-wrap gap-3 kanban-header justify-content-between">
                    <div class="d-sm-flex align-items-center flex-wrap gap-3 w-sm-50 mb-sm-0 mb-3">
                        <div class="mb-sm-0 mb-3">
                            <button class="btn btn-primary me-2" data-bs-toggle="modal" data-bs-target="#add-board"><i
                                    class="ri-add-line me-1 fw-medium align-middle"></i>New Board</button>
                        </div>
                        <div>
                            <div class="avatar-list-stacked">
                                <span class="avatar avatar-sm avatar-rounded">
                                    <img src="../assets/images/faces/2.jpg" alt="img">
                                </span>
                                <span class="avatar avatar-sm avatar-rounded">
                                    <img src="../assets/images/faces/8.jpg" alt="img">
                                </span>
                                <span class="avatar avatar-sm avatar-rounded">
                                    <img src="../assets/images/faces/2.jpg" alt="img">
                                </span>
                                <span class="avatar avatar-sm avatar-rounded">
                                    <img src="../assets/images/faces/10.jpg" alt="img">
                                </span>
                                <span class="avatar avatar-sm avatar-rounded">
                                    <img src="../assets/images/faces/4.jpg" alt="img">
                                </span>
                                <span class="avatar avatar-sm avatar-rounded">
                                    <img src="../assets/images/faces/13.jpg" alt="img">
                                </span>
                                <a class="avatar avatar-sm bg-primary avatar-rounded text-fixed-white"
                                    href="javascript:void(0);">
                                    +8
                                </a>
                            </div>
                        </div>
                    </div>
                    <div class="d-sm-flex align-items-center flex-wrap justify-content-end gap-3">
                        @if (isRendered)
                        {
                            <TomSelect TItem="SelectItem" Items="_selectedItems" TType="string" Multiple="false" @bind-Value="_selectedValue" Data="_sortByOptions" TextField="@(item => item.Name)" ValueField="@(item => item.Id)" Placeholder="" Configuration="_configuration" />
                        }
                        <div class="d-flex mt-sm-0 mt-3" role="search">
                            <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
                            <button class="btn btn-light" type="submit">Search</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- End:: row-1 -->

<!-- Start::row-2 -->
<div class="VYZOR-kanban-board">
    <div class="kanban-tasks-type new">
        <div class="pe-3 mb-3">
            <div class="d-flex justify-content-between align-items-center">
                <span class="d-block fw-medium fs-15">New - 04</span>
                <div>
                    <a aria-label="anchor" href="javascript:void(0)"
                        class="btn btn-sm bg-white text-default border btn-wave" data-bs-toggle="modal"
                        data-bs-target="#add-task">
                        <i class="ri-add-line align-middle me-1 fw-medium"></i>Add Task
                    </a>
                </div>
            </div>
        </div>
        <div class="kanban-tasks" id="new-tasks">
            <div id="new-tasks-draggable" data-view-btn="new-tasks">
                <div class="task-null-background" draggable="false">
                    <img src="../assets/images/media/media-81.svg" alt="">
                </div>
                <div class="card custom-card">
                    <div class="card-body p-0">
                        <div class="p-3 kanban-board-head">
                            <div class="d-flex text-muted justify-content-between mb-1 fs-12 fw-medium">
                                <div><i class="ri-time-line me-1 align-middle d-inline-block"></i>Created - 28 May</div>
                                <div>2 days left</div>
                            </div>
                            <div class="d-flex align-items-center justify-content-between">
                                <div class="task-badges"><span class="badge">#SPK - 11</span><span
                                        class="ms-1 badge">UI/UX</span></div>
                                <div class="dropdown">
                                    <a aria-label="anchor" href="javascript:void(0);"
                                        class="btn btn-icon btn-sm btn-white border" data-bs-toggle="dropdown"
                                        aria-expanded="false">
                                        <i class="fe fe-more-vertical"></i>
                                    </a>
                                    <ul class="dropdown-menu dropdown-menu-end">
                                        <li><a class="dropdown-item" href="javascript:void(0);"><i
                                                    class="ri-eye-line me-1 align-middle d-inline-block"></i>View</a>
                                        </li>
                                        <li><a class="dropdown-item" href="javascript:void(0);"><i
                                                    class="ri-delete-bin-line me-1 align-middle d-inline-block"></i>Delete</a>
                                        </li>
                                        <li><a class="dropdown-item" href="javascript:void(0);"><i
                                                    class="ri-edit-line me-1 align-middle d-inline-block"></i>Edit</a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            <div class="kanban-content mt-2">
                                <h6 class="fw-medium mb-1 fs-15">New Dashboard design.</h6>
                                <div class="kanban-task-description">Lorem ipsum dolor sit amet consectetur adipisicing
                                    elit, Nulla soluta consectetur sit amet elit dolor sit amet.</div>
                            </div>
                        </div>
                        <div class="p-3 border-top border-block-start-dashed">
                            <div class="d-flex align-items-center justify-content-between">
                                <div>
                                    <a href="javascript:void(0);" class="me-2 text-primary">
                                        <span class="me-1"><i
                                                class="ri-thumb-up-fill align-middle fw-normal"></i></span><span
                                            class="fw-medium fs-12">12</span>
                                    </a>
                                    <a href="javascript:void(0);" class="text-muted">
                                        <span class="me-1"><i
                                                class="ri-message-2-line align-middle fw-normal"></i></span><span
                                            class="fw-medium fs-12">02</span>
                                    </a>
                                </div>
                                <div class="avatar-list-stacked">
                                    <span class="avatar avatar-sm avatar-rounded">
                                        <img src="../assets/images/faces/11.jpg" alt="img">
                                    </span>
                                    <span class="avatar avatar-sm avatar-rounded">
                                        <img src="../assets/images/faces/12.jpg" alt="img">
                                    </span>
                                    <span class="avatar avatar-sm avatar-rounded">
                                        <img src="../assets/images/faces/7.jpg" alt="img">
                                    </span>
                                    <span class="avatar avatar-sm avatar-rounded">
                                        <img src="../assets/images/faces/8.jpg" alt="img">
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card custom-card">
                    <div class="card-body p-0">
                        <div class="p-3 kanban-board-head">
                            <div class="d-flex text-muted justify-content-between mb-1 fs-12 fw-medium">
                                <div><i class="ri-time-line me-1 align-middle d-inline-block"></i>Created - 30 May</div>
                                <div>2 days left</div>
                            </div>
                            <div class="d-flex align-items-center justify-content-between">
                                <div class="task-badges"><span class="badge">#SPK - 05</span><span
                                        class="ms-1 badge">Marketing</span><span class="ms-1 badge">Finance</span></div>
                                <div class="dropdown">
                                    <a aria-label="anchor" href="javascript:void(0);"
                                        class="btn btn-icon btn-sm btn-white border" data-bs-toggle="dropdown"
                                        aria-expanded="false">
                                        <i class="fe fe-more-vertical"></i>
                                    </a>
                                    <ul class="dropdown-menu dropdown-menu-end">
                                        <li><a class="dropdown-item" href="javascript:void(0);"><i
                                                    class="ri-eye-line me-1 align-middle d-inline-block"></i>View</a>
                                        </li>
                                        <li><a class="dropdown-item" href="javascript:void(0);"><i
                                                    class="ri-delete-bin-line me-1 align-middle d-inline-block"></i>Delete</a>
                                        </li>
                                        <li><a class="dropdown-item" href="javascript:void(0);"><i
                                                    class="ri-edit-line me-1 align-middle d-inline-block"></i>Edit</a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            <div class="kanban-content mt-2">
                                <h6 class="fw-medium mb-1 fs-15">Marketing next projects.</h6>
                                <div class="kanban-task-description">Lorem ipsum dolor sit amet consectetur adipisicing
                                    elit. Nulla soluta </div>
                            </div>
                        </div>
                        <div class="p-3 border-top border-block-start-dashed">
                            <div class="d-flex align-items-center justify-content-between">
                                <div>
                                    <a href="javascript:void(0);" class="me-2 text-primary">
                                        <span class="me-1"><i
                                                class="ri-thumb-up-fill align-middle fw-normal"></i></span><span
                                            class="fw-medium fs-12">40</span>
                                    </a>
                                    <a href="javascript:void(0);" class="text-muted">
                                        <span class="me-1"><i
                                                class="ri-message-2-line align-middle fw-normal"></i></span><span
                                            class="fw-medium fs-12">08</span>
                                    </a>
                                </div>
                                <div class="avatar-list-stacked">
                                    <span class="avatar avatar-sm avatar-rounded">
                                        <img src="../assets/images/faces/13.jpg" alt="img">
                                    </span>
                                    <span class="avatar avatar-sm avatar-rounded">
                                        <img src="../assets/images/faces/6.jpg" alt="img">
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card custom-card">
                    <div class="card-body p-0">
                        <div class="p-3 kanban-board-head">
                            <div class="d-flex text-muted justify-content-between mb-1 fs-12 fw-medium">
                                <div><i class="ri-time-line me-1 align-middle d-inline-block"></i>Created - 02 Jun</div>
                                <div>1 days left</div>
                            </div>
                            <div class="d-flex align-items-center justify-content-between">
                                <div class="task-badges"><span class="badge">#SPK - 08</span><span
                                        class="ms-1 badge">Designing</span></div>
                                <div class="dropdown">
                                    <a aria-label="anchor" href="javascript:void(0);"
                                        class="btn btn-icon btn-sm btn-white border" data-bs-toggle="dropdown"
                                        aria-expanded="false">
                                        <i class="fe fe-more-vertical"></i>
                                    </a>
                                    <ul class="dropdown-menu dropdown-menu-end">
                                        <li><a class="dropdown-item" href="javascript:void(0);"><i
                                                    class="ri-eye-line me-1 align-middle d-inline-block"></i>View</a>
                                        </li>
                                        <li><a class="dropdown-item" href="javascript:void(0);"><i
                                                    class="ri-delete-bin-line me-1 align-middle d-inline-block"></i>Delete</a>
                                        </li>
                                        <li><a class="dropdown-item" href="javascript:void(0);"><i
                                                    class="ri-edit-line me-1 align-middle d-inline-block"></i>Edit</a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            <div class="kanban-content mt-2">
                                <div class="task-image mt-2">
                                    <img src="../assets/images/media/media-36.jpg"
                                        class="img-fluid rounded kanban-image" alt="">
                                </div>
                                <h6 class="fw-medium mb-0 mt-2">Design multi usage landing.</h6>
                            </div>
                        </div>
                        <div class="p-3 border-top border-block-start-dashed">
                            <div class="d-flex align-items-center justify-content-between">
                                <div>
                                    <a href="javascript:void(0);" class="me-2 text-primary">
                                        <span class="me-1"><i
                                                class="ri-thumb-up-fill align-middle fw-normal"></i></span><span
                                            class="fw-medium fs-12">16</span>
                                    </a>
                                    <a href="javascript:void(0);" class="text-muted">
                                        <span class="me-1"><i
                                                class="ri-message-2-line align-middle fw-normal"></i></span><span
                                            class="fw-medium fs-12">28</span>
                                    </a>
                                </div>
                                <div class="avatar-list-stacked">
                                    <span class="avatar avatar-sm avatar-rounded">
                                        <img src="../assets/images/faces/2.jpg" alt="img">
                                    </span>
                                    <span class="avatar avatar-sm avatar-rounded">
                                        <img src="../assets/images/faces/8.jpg" alt="img">
                                    </span>
                                    <span class="avatar avatar-sm avatar-rounded">
                                        <img src="../assets/images/faces/5.jpg" alt="img">
                                    </span>
                                    <span class="avatar avatar-sm avatar-rounded">
                                        <img src="../assets/images/faces/10.jpg" alt="img">
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="d-grid view-more-button mt-3">
            <button class="btn btn-primary-light btn-wave">View More</button>
        </div>
    </div>
    <div class="kanban-tasks-type todo">
        <div class="pe-3 mb-3">
            <div class="d-flex justify-content-between align-items-center">
                <span class="d-block fw-medium fs-15">Todo - 36</span>
                <div>
                    <a aria-label="anchor" href="javascript:void(0)"
                        class="btn btn-sm bg-white text-default border btn-wave" data-bs-toggle="modal"
                        data-bs-target="#add-task">
                        <i class="ri-add-line align-middle me-1 fw-medium"></i>Add Task
                    </a>
                </div>
            </div>
        </div>
        <div class="kanban-tasks" id="todo-tasks">
            <div id="todo-tasks-draggable" data-view-btn="todo-tasks">
                <div class="task-null-background" draggable="false">
                    <img src="../assets/images/media/media-81.svg" alt="">
                </div>
                <div class="card custom-card">
                    <div class="card-body p-0">
                        <div class="p-3 kanban-board-head">
                            <div class="d-flex text-muted justify-content-between mb-1 fs-12 fw-medium">
                                <div><i class="ri-time-line me-1 align-middle d-inline-block"></i>Created - 01 Jun</div>
                                <div>10 days left</div>
                            </div>
                            <div class="d-flex align-items-center justify-content-between">
                                <div class="task-badges"><span class="badge">#SPK - 07</span><span
                                        class="ms-1 badge">Admin</span><span class="ms-1 badge">Authentication</span>
                                </div>
                                <div class="dropdown">
                                    <a aria-label="anchor" href="javascript:void(0);"
                                        class="btn btn-icon btn-sm btn-white border" data-bs-toggle="dropdown"
                                        aria-expanded="false">
                                        <i class="fe fe-more-vertical"></i>
                                    </a>
                                    <ul class="dropdown-menu dropdown-menu-end">
                                        <li><a class="dropdown-item" href="javascript:void(0);"><i
                                                    class="ri-eye-line me-1 align-middle d-inline-block"></i>View</a>
                                        </li>
                                        <li><a class="dropdown-item" href="javascript:void(0);"><i
                                                    class="ri-delete-bin-line me-1 align-middle d-inline-block"></i>Delete</a>
                                        </li>
                                        <li><a class="dropdown-item" href="javascript:void(0);"><i
                                                    class="ri-edit-line me-1 align-middle d-inline-block"></i>Edit</a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            <div class="kanban-content mt-2">
                                <h6 class="fw-medium mb-1 fs-15">Adding Authentication Pages.</h6>
                                <div class="kanban-task-description">Lorem ipsum dolor sit amet consectetur adipisicing
                                    elit. Nulla soluta </div>
                            </div>
                        </div>
                        <div class="p-3 border-top border-block-start-dashed">
                            <div class="d-flex align-items-center justify-content-between">
                                <div>
                                    <a href="javascript:void(0);" class="me-2 text-primary">
                                        <span class="me-1"><i
                                                class="ri-thumb-up-fill align-middle fw-normal"></i></span><span
                                            class="fw-medium fs-12">06</span>
                                    </a>
                                    <a href="javascript:void(0);" class="text-muted">
                                        <span class="me-1"><i
                                                class="ri-message-2-line align-middle fw-normal"></i></span><span
                                            class="fw-medium fs-12">02</span>
                                    </a>
                                </div>
                                <div class="avatar-list-stacked">
                                    <span class="avatar avatar-sm avatar-rounded">
                                        <img src="../assets/images/faces/9.jpg" alt="img">
                                    </span>
                                    <span class="avatar avatar-sm avatar-rounded">
                                        <img src="../assets/images/faces/8.jpg" alt="img">
                                    </span>
                                    <span class="avatar avatar-sm avatar-rounded">
                                        <img src="../assets/images/faces/14.jpg" alt="img">
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card custom-card">
                    <div class="card-body p-0">
                        <div class="p-3 kanban-board-head">
                            <div class="d-flex text-muted justify-content-between mb-1 fs-12 fw-medium">
                                <div><i class="ri-time-line me-1 align-middle d-inline-block"></i>Created - 05 Jun</div>
                                <div>14 days left</div>
                            </div>
                            <div class="d-flex align-items-center justify-content-between">
                                <div class="task-badges"><span class="badge">#SPK - 15</span><span
                                        class="ms-1 badge">Planning</span></div>
                                <div class="dropdown">
                                    <a aria-label="anchor" href="javascript:void(0);"
                                        class="btn btn-icon btn-sm btn-white border" data-bs-toggle="dropdown"
                                        aria-expanded="false">
                                        <i class="fe fe-more-vertical"></i>
                                    </a>
                                    <ul class="dropdown-menu dropdown-menu-end">
                                        <li><a class="dropdown-item" href="javascript:void(0);"><i
                                                    class="ri-eye-line me-1 align-middle d-inline-block"></i>View</a>
                                        </li>
                                        <li><a class="dropdown-item" href="javascript:void(0);"><i
                                                    class="ri-delete-bin-line me-1 align-middle d-inline-block"></i>Delete</a>
                                        </li>
                                        <li><a class="dropdown-item" href="javascript:void(0);"><i
                                                    class="ri-edit-line me-1 align-middle d-inline-block"></i>Edit</a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            <div class="kanban-content mt-2">
                                <div class="task-image mt-2">
                                    <img src="../assets/images/media/media-41.jpg"
                                        class="img-fluid rounded kanban-image" alt="">
                                </div>
                                <h6 class="fw-medium mb-0 mt-2">New Project Discussion.</h6>
                            </div>
                        </div>
                        <div class="p-3 border-top border-block-start-dashed">
                            <div class="d-flex align-items-center justify-content-between">
                                <div>
                                    <a href="javascript:void(0);" class="me-2 text-primary">
                                        <span class="me-1"><i
                                                class="ri-thumb-up-fill align-middle fw-normal"></i></span><span
                                            class="fw-medium fs-12">17</span>
                                    </a>
                                    <a href="javascript:void(0);" class="text-muted">
                                        <span class="me-1"><i
                                                class="ri-message-2-line align-middle fw-normal"></i></span><span
                                            class="fw-medium fs-12">06</span>
                                    </a>
                                </div>
                                <div class="avatar-list-stacked">
                                    <span class="avatar avatar-sm avatar-rounded">
                                        <img src="../assets/images/faces/2.jpg" alt="img">
                                    </span>
                                    <span class="avatar avatar-sm avatar-rounded">
                                        <img src="../assets/images/faces/8.jpg" alt="img">
                                    </span>
                                    <span class="avatar avatar-sm avatar-rounded">
                                        <img src="../assets/images/faces/5.jpg" alt="img">
                                    </span>
                                    <span class="avatar avatar-sm avatar-rounded">
                                        <img src="../assets/images/faces/10.jpg" alt="img">
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="d-grid view-more-button mt-3">
            <button class="btn btn-warning-light btn-wave">View More</button>
        </div>
    </div>
    <div class="kanban-tasks-type in-progress">
        <div class="pe-3 mb-3">
            <div class="d-flex justify-content-between align-items-center">
                <span class="d-block fw-medium fs-15">On Going - 25</span>
                <div>
                    <a aria-label="anchor" href="javascript:void(0)"
                        class="btn btn-sm bg-white text-default border btn-wave" data-bs-toggle="modal"
                        data-bs-target="#add-task">
                        <i class="ri-add-line align-middle me-1 fw-medium"></i>Add Task
                    </a>
                </div>
            </div>
        </div>
        <div class="kanban-tasks" id="inprogress-tasks">
            <div id="inprogress-tasks-draggable" data-view-btn="inprogress-tasks">
                <div class="task-null-background" draggable="false">
                    <img src="../assets/images/media/media-81.svg" alt="">
                </div>
                <div class="card custom-card">
                    <div class="card-body p-0">
                        <div class="p-3 kanban-board-head">
                            <div class="d-flex text-muted justify-content-between mb-1 fs-12 fw-medium">
                                <div><i class="ri-time-line me-1 align-middle d-inline-block"></i>Created - 02 Jun</div>
                                <div>5 days left</div>
                            </div>
                            <div class="d-flex align-items-center justify-content-between">
                                <div class="task-badges"><span class="badge">#SPK - 13</span><span class="ms-1 badge">UI
                                        Design</span><span class="ms-1 badge">Development</span></div>
                                <div class="dropdown">
                                    <a aria-label="anchor" href="javascript:void(0);"
                                        class="btn btn-icon btn-sm btn-white border" data-bs-toggle="dropdown"
                                        aria-expanded="false">
                                        <i class="fe fe-more-vertical"></i>
                                    </a>
                                    <ul class="dropdown-menu dropdown-menu-end">
                                        <li><a class="dropdown-item" href="javascript:void(0);"><i
                                                    class="ri-eye-line me-1 align-middle d-inline-block"></i>View</a>
                                        </li>
                                        <li><a class="dropdown-item" href="javascript:void(0);"><i
                                                    class="ri-delete-bin-line me-1 align-middle d-inline-block"></i>Delete</a>
                                        </li>
                                        <li><a class="dropdown-item" href="javascript:void(0);"><i
                                                    class="ri-edit-line me-1 align-middle d-inline-block"></i>Edit</a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            <div class="kanban-content mt-2">
                                <h6 class="fw-medium mb-1 fs-15">Create Calendar & Mail pages.</h6>
                                <div class="kanban-task-description">Lorem ipsum dolor sit amet consectetur adipisicing
                                    elit. Nulla soluta </div>
                            </div>
                        </div>
                        <div class="p-3 border-top border-block-start-dashed">
                            <div class="d-flex align-items-center justify-content-between">
                                <div>
                                    <a href="javascript:void(0);" class="me-2 text-primary">
                                        <span class="me-1"><i
                                                class="ri-thumb-up-fill align-middle fw-normal"></i></span><span
                                            class="fw-medium fs-12">05</span>
                                    </a>
                                    <a href="javascript:void(0);" class="text-muted">
                                        <span class="me-1"><i
                                                class="ri-message-2-line align-middle fw-normal"></i></span><span
                                            class="fw-medium fs-12">13</span>
                                    </a>
                                </div>
                                <div class="avatar-list-stacked">
                                    <span class="avatar avatar-sm avatar-rounded">
                                        <img src="../assets/images/faces/13.jpg" alt="img">
                                    </span>
                                    <span class="avatar avatar-sm avatar-rounded">
                                        <img src="../assets/images/faces/6.jpg" alt="img">
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card custom-card">
                    <div class="card-body p-0">
                        <div class="p-3 kanban-board-head">
                            <div class="d-flex text-muted justify-content-between mb-1 fs-12 fw-medium">
                                <div><i class="ri-time-line me-1 align-middle d-inline-block"></i>Created - 03 Jun</div>
                                <div>12 days left</div>
                            </div>
                            <div class="d-flex align-items-center justify-content-between">
                                <div class="task-badges"><span class="badge ms-1">#SPK - 09</span><span
                                        class="ms-1">Product</span></div>
                                <div class="dropdown">
                                    <a aria-label="anchor" href="javascript:void(0);"
                                        class="btn btn-icon btn-sm btn-white border" data-bs-toggle="dropdown"
                                        aria-expanded="false">
                                        <i class="fe fe-more-vertical"></i>
                                    </a>
                                    <ul class="dropdown-menu dropdown-menu-end">
                                        <li><a class="dropdown-item" href="javascript:void(0);"><i
                                                    class="ri-eye-line me-1 align-middle d-inline-block"></i>View</a>
                                        </li>
                                        <li><a class="dropdown-item" href="javascript:void(0);"><i
                                                    class="ri-delete-bin-line me-1 align-middle d-inline-block"></i>Delete</a>
                                        </li>
                                        <li><a class="dropdown-item" href="javascript:void(0);"><i
                                                    class="ri-edit-line me-1 align-middle d-inline-block"></i>Edit</a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            <div class="kanban-content mt-2">
                                <h6 class="fw-medium mb-1 fs-15">Project design Figma,Sketch.</h6>
                                <div class="kanban-task-description">Lorem ipsum dolor sit amet consectetur adipisicing
                                    elit. Nulla soluta </div>
                            </div>
                        </div>
                        <div class="p-3 border-top border-block-start-dashed">
                            <div class="d-flex align-items-center justify-content-between">
                                <div>
                                    <a href="javascript:void(0);" class="me-2 text-primary">
                                        <span class="me-1"><i
                                                class="ri-thumb-up-fill align-middle fw-normal"></i></span><span
                                            class="fw-medium fs-12">02</span>
                                    </a>
                                    <a href="javascript:void(0);" class="text-muted">
                                        <span class="me-1"><i
                                                class="ri-message-2-line align-middle fw-normal"></i></span><span
                                            class="fw-medium fs-12">0</span>
                                    </a>
                                </div>
                                <div class="avatar-list-stacked">
                                    <span class="avatar avatar-sm avatar-rounded">
                                        <img src="../assets/images/faces/12.jpg" alt="img">
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="d-grid view-more-button mt-3">
            <button class="btn btn-info-light btn-wave">View More</button>
        </div>
    </div>
    <div class="kanban-tasks-type inreview">
        <div class="pe-3 mb-3">
            <div class="d-flex justify-content-between align-items-center">
                <span class="d-block fw-medium fs-15">In Review - 02</span>
                <div>
                    <a aria-label="anchor" href="javascript:void(0)"
                        class="btn btn-sm bg-white text-default border btn-wave" data-bs-toggle="modal"
                        data-bs-target="#add-task">
                        <i class="ri-add-line align-middle me-1 fw-medium"></i>Add Task
                    </a>
                </div>
            </div>
        </div>
        <div class="kanban-tasks" id="inreview-tasks">
            <div id="inreview-tasks-draggable" data-view-btn="inreview-tasks">
                <div class="task-null-background" draggable="false">
                    <img src="../assets/images/media/media-81.svg" alt="">
                </div>
                <div class="card custom-card">
                    <div class="card-body p-0">
                        <div class="p-3 kanban-board-head">
                            <div class="d-flex text-muted justify-content-between mb-1 fs-12 fw-medium">
                                <div><i class="ri-time-line me-1 align-middle d-inline-block"></i>Created - 05 Jun</div>
                                <div>14 days left</div>
                            </div>
                            <div class="d-flex align-items-center justify-content-between">
                                <div class="task-badges"><span class="badge">#SPK - 15</span><span
                                        class="ms-1 badge">Review</span></div>
                                <div class="dropdown">
                                    <a aria-label="anchor" href="javascript:void(0);"
                                        class="btn btn-icon btn-sm btn-white border" data-bs-toggle="dropdown"
                                        aria-expanded="false">
                                        <i class="fe fe-more-vertical"></i>
                                    </a>
                                    <ul class="dropdown-menu dropdown-menu-end">
                                        <li><a class="dropdown-item" href="javascript:void(0);"><i
                                                    class="ri-eye-line me-1 align-middle d-inline-block"></i>View</a>
                                        </li>
                                        <li><a class="dropdown-item" href="javascript:void(0);"><i
                                                    class="ri-delete-bin-line me-1 align-middle d-inline-block"></i>Delete</a>
                                        </li>
                                        <li><a class="dropdown-item" href="javascript:void(0);"><i
                                                    class="ri-edit-line me-1 align-middle d-inline-block"></i>Edit</a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            <div class="kanban-content mt-2">
                                <div class="task-image mt-2">
                                    <img src="../assets/images/media/media-43.jpg"
                                        class="img-fluid rounded kanban-image" alt="">
                                </div>
                                <h6 class="fw-medium mb-0 mt-2">Design Architecture strategy.</h6>
                            </div>
                        </div>
                        <div class="p-3 border-top border-block-start-dashed">
                            <div class="d-flex align-items-center justify-content-between">
                                <div>
                                    <a href="javascript:void(0);" class="me-2 text-primary">
                                        <span class="me-1"><i
                                                class="ri-thumb-up-fill align-middle fw-normal"></i></span><span
                                            class="fw-medium fs-12">09</span>
                                    </a>
                                    <a href="javascript:void(0);" class="text-muted">
                                        <span class="me-1"><i
                                                class="ri-message-2-line align-middle fw-normal"></i></span><span
                                            class="fw-medium fs-12">35</span>
                                    </a>
                                </div>
                                <div class="avatar-list-stacked">
                                    <span class="avatar avatar-sm avatar-rounded">
                                        <img src="../assets/images/faces/3.jpg" alt="img">
                                    </span>
                                    <span class="avatar avatar-sm avatar-rounded">
                                        <img src="../assets/images/faces/5.jpg" alt="img">
                                    </span>
                                    <span class="avatar avatar-sm avatar-rounded">
                                        <img src="../assets/images/faces/7.jpg" alt="img">
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="d-grid view-more-button mt-3">
            <button class="btn btn-danger-light btn-wave">View More</button>
        </div>
    </div>
    <div class="kanban-tasks-type completed">
        <div class="pe-3 mb-3">
            <div class="d-flex justify-content-between align-items-center">
                <span class="d-block fw-medium fs-15">Completed - 36</span>
                <div>
                    <a aria-label="anchor" href="javascript:void(0)"
                        class="btn btn-sm bg-white text-default border btn-wave" data-bs-toggle="modal"
                        data-bs-target="#add-task">
                        <i class="ri-add-line align-middle me-1 fw-medium"></i>Add Task
                    </a>
                </div>
            </div>
        </div>
        <div class="kanban-tasks" id="completed-tasks">
            <div id="completed-tasks-draggable" data-view-btn="completed-tasks">
                <div class="task-null-background" draggable="false">
                    <img src="../assets/images/media/media-81.svg" alt="">
                </div>
                <div class="card custom-card">
                    <div class="card-body p-0">
                        <div class="p-3 kanban-board-head">
                            <div class="d-flex text-muted justify-content-between mb-1 fs-12 fw-medium">
                                <div><i class="ri-time-line me-1 align-middle d-inline-block"></i>Created - 12 Jun</div>
                                <div class="text-success"><i
                                        class="ri-check-fill me-1 align-middle d-inline-block"></i>Done</div>
                            </div>
                            <div class="d-flex align-items-center justify-content-between">
                                <div class="task-badges"><span class="badge">#SPK - 04</span><span
                                        class="ms-1 badge">UI/UX</span></div>
                                <div class="dropdown">
                                    <a aria-label="anchor" href="javascript:void(0);"
                                        class="btn btn-icon btn-sm btn-white border" data-bs-toggle="dropdown"
                                        aria-expanded="false">
                                        <i class="fe fe-more-vertical"></i>
                                    </a>
                                    <ul class="dropdown-menu dropdown-menu-end">
                                        <li><a class="dropdown-item" href="javascript:void(0);"><i
                                                    class="ri-eye-line me-1 align-middle d-inline-block"></i>View</a>
                                        </li>
                                        <li><a class="dropdown-item" href="javascript:void(0);"><i
                                                    class="ri-delete-bin-line me-1 align-middle d-inline-block"></i>Delete</a>
                                        </li>
                                        <li><a class="dropdown-item" href="javascript:void(0);"><i
                                                    class="ri-edit-line me-1 align-middle d-inline-block"></i>Edit</a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            <div class="kanban-content mt-2">
                                <h6 class="fw-medium mb-1 fs-15">Sash project update.</h6>
                                <div class="kanban-task-description">Lorem ipsum dolor sit amet consectetur adipisicing
                                    elit. Nulla soluta </div>
                            </div>
                        </div>
                        <div class="p-3 border-top border-block-start-dashed">
                            <div class="d-flex align-items-center justify-content-between">
                                <div>
                                    <a href="javascript:void(0);" class="me-2 text-primary">
                                        <span class="me-1"><i
                                                class="ri-thumb-up-fill align-middle fw-normal"></i></span><span
                                            class="fw-medium fs-12">18</span>
                                    </a>
                                    <a href="javascript:void(0);" class="text-muted">
                                        <span class="me-1"><i
                                                class="ri-message-2-line align-middle fw-normal"></i></span><span
                                            class="fw-medium fs-12">03</span>
                                    </a>
                                </div>
                                <div class="avatar-list-stacked">
                                    <span class="avatar avatar-sm avatar-rounded">
                                        <img src="../assets/images/faces/6.jpg" alt="img">
                                    </span>
                                    <span class="avatar avatar-sm avatar-rounded">
                                        <img src="../assets/images/faces/13.jpg" alt="img">
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card custom-card">
                    <div class="card-body p-0">
                        <div class="p-3 kanban-board-head">
                            <div class="d-flex text-muted justify-content-between mb-1 fs-12 fw-medium">
                                <div><i class="ri-time-line me-1 align-middle d-inline-block"></i>Created - 10 Jun</div>
                                <div class="text-success"><i
                                        class="ri-check-fill me-1 align-middle d-inline-block"></i>Done</div>
                            </div>
                            <div class="d-flex align-items-center justify-content-between">
                                <div class="task-badges"><span class="badge">#SPK - 10</span><span
                                        class="ms-1 badge">Development</span></div>
                                <div class="dropdown">
                                    <a aria-label="anchor" href="javascript:void(0);"
                                        class="btn btn-icon btn-sm btn-white border" data-bs-toggle="dropdown"
                                        aria-expanded="false">
                                        <i class="fe fe-more-vertical"></i>
                                    </a>
                                    <ul class="dropdown-menu dropdown-menu-end">
                                        <li><a class="dropdown-item" href="javascript:void(0);"><i
                                                    class="ri-eye-line me-1 align-middle d-inline-block"></i>View</a>
                                        </li>
                                        <li><a class="dropdown-item" href="javascript:void(0);"><i
                                                    class="ri-delete-bin-line me-1 align-middle d-inline-block"></i>Delete</a>
                                        </li>
                                        <li><a class="dropdown-item" href="javascript:void(0);"><i
                                                    class="ri-edit-line me-1 align-middle d-inline-block"></i>Edit</a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            <div class="kanban-content mt-2">
                                <h6 class="fw-medium mb-1 fs-15">React JS new version update.</h6>
                                <div class="kanban-task-description">Lorem ipsum dolor sit amet consectetur adipisicing
                                    elit. Nulla soluta </div>
                            </div>
                        </div>
                        <div class="p-3 border-top border-block-start-dashed">
                            <div class="d-flex align-items-center justify-content-between">
                                <div>
                                    <a href="javascript:void(0);" class="me-2 text-primary">
                                        <span class="me-1"><i
                                                class="ri-thumb-up-fill align-middle fw-normal"></i></span><span
                                            class="fw-medium fs-12">22</span>
                                    </a>
                                    <a href="javascript:void(0);" class="text-muted">
                                        <span class="me-1"><i
                                                class="ri-message-2-line align-middle fw-normal"></i></span><span
                                            class="fw-medium fs-12">12</span>
                                    </a>
                                </div>
                                <div class="avatar-list-stacked">
                                    <span class="avatar avatar-sm avatar-rounded">
                                        <img src="../assets/images/faces/10.jpg" alt="img">
                                    </span>
                                    <span class="avatar avatar-sm avatar-rounded">
                                        <img src="../assets/images/faces/11.jpg" alt="img">
                                    </span>
                                    <span class="avatar avatar-sm avatar-rounded">
                                        <img src="../assets/images/faces/1.jpg" alt="img">
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card custom-card">
                    <div class="card-body p-0">
                        <div class="p-3 kanban-board-head">
                            <div class="d-flex text-muted justify-content-between mb-1 fs-12 fw-medium">
                                <div><i class="ri-time-line me-1 align-middle d-inline-block"></i>Created - 07 Jun</div>
                                <div class="text-success"><i
                                        class="ri-check-fill me-1 align-middle d-inline-block"></i>Done</div>
                            </div>
                            <div class="d-flex align-items-center justify-content-between">
                                <div class="task-badges"><span class="badge">#SPK - 16</span><span
                                        class="ms-1 badge">Discussion</span></div>
                                <div class="dropdown">
                                    <a aria-label="anchor" href="javascript:void(0);"
                                        class="btn btn-icon btn-sm btn-white border" data-bs-toggle="dropdown"
                                        aria-expanded="false">
                                        <i class="fe fe-more-vertical"></i>
                                    </a>
                                    <ul class="dropdown-menu dropdown-menu-end">
                                        <li><a class="dropdown-item" href="javascript:void(0);"><i
                                                    class="ri-eye-line me-1 align-middle d-inline-block"></i>View</a>
                                        </li>
                                        <li><a class="dropdown-item" href="javascript:void(0);"><i
                                                    class="ri-delete-bin-line me-1 align-middle d-inline-block"></i>Delete</a>
                                        </li>
                                        <li><a class="dropdown-item" href="javascript:void(0);"><i
                                                    class="ri-edit-line me-1 align-middle d-inline-block"></i>Edit</a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            <div class="kanban-content mt-2">
                                <div class="task-image mt-2">
                                    <img src="../assets/images/media/media-69.jpg"
                                        class="img-fluid rounded kanban-image bg-light" alt="">
                                </div>
                                <h6 class="fw-medium mb-0 mt-2">Project discussion with client.</h6>
                            </div>
                        </div>
                        <div class="p-3 border-top border-block-start-dashed">
                            <div class="d-flex align-items-center justify-content-between">
                                <div>
                                    <a href="javascript:void(0);" class="me-2 text-primary">
                                        <span class="me-1"><i
                                                class="ri-thumb-up-fill align-middle fw-normal"></i></span><span
                                            class="fw-medium fs-12">11</span>
                                    </a>
                                    <a href="javascript:void(0);" class="text-muted">
                                        <span class="me-1"><i
                                                class="ri-message-2-line align-middle fw-normal"></i></span><span
                                            class="fw-medium fs-12">05</span>
                                    </a>
                                </div>
                                <div class="avatar-list-stacked">
                                    <span class="avatar avatar-sm avatar-rounded">
                                        <img src="../assets/images/faces/4.jpg" alt="img">
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="d-grid view-more-button mt-3">
            <button class="btn btn-success-light btn-wave">View More</button>
        </div>
    </div>
</div>
<!--End::row-2 -->

<!-- Start::add board modal -->
<div class="modal fade" id="add-board" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h6 class="modal-title">Add Board</h6>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body px-4">
                <div class="row">
                    <div class="col-xl-12">
                        <label for="board-title" class="form-label">Task Board Title</label>
                        <input type="text" class="form-control" id="board-title" placeholder="Board Title">
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-light" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary">Add Board</button>
            </div>
        </div>
    </div>
</div>
<!-- End::add board modal -->

<!-- Start::add task modal -->
<div class="modal fade" id="add-task" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h6 class="modal-title">Add Task</h6>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body px-4">
                <div class="row gy-2">
                    <div class="col-xl-6">
                        <label for="task-name" class="form-label">Task Name</label>
                        <input type="text" class="form-control" id="task-name" placeholder="Task Name">
                    </div>
                    <div class="col-xl-6">
                        <label for="task-id" class="form-label">Task ID</label>
                        <input type="text" class="form-control" id="task-id" placeholder="Task ID">
                    </div>
                    <div class="col-xl-12">
                        <label for="text-area" class="form-label">Task Description</label>
                        <textarea class="form-control" id="text-area" rows="2"
                            placeholder="Write Description"></textarea>
                    </div>
                    <div class="col-xl-12">
                        <label for="text-area" class="form-label">Task Images</label>
                         @if (isRendered)
                            {
                                <FilePond @ref="FilePond" Options="_Attachments"></FilePond>
                            }
                    </div>
                    <div class="col-xl-12">
                        <label class="form-label">Assigned To</label>
                         @if (isRendered)
                        {
                            <TomSelect TItem="SelectItem" Items="_selectedItems" TType="string" Multiple="true" @bind-Value="_selectedValue" Data="_assignedToOptions" TextField="@(item => item.Name)" ValueField="@(item => item.Id)" Placeholder="" Configuration="_configuration2" />
                        }
                    </div>
                    <div class="col-xl-6">
                        <label class="form-label">Target Date</label>
                        <div class="form-group">
                            <div class="input-group">
                                <div class="input-group-text text-muted"> <i class="ri-calendar-line"></i> </div>
                               <Flatpickr class="form-control"
                                        @ref="_flatpickr"
                                        placeholder="Choose date and time"
                                        EnableTime="true"
                                        DateFormat="Y-m-d H:i"
                                />
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-6">
                        <label class="form-label">Tags</label>
                         @if (isRendered)
                        {
                            <TomSelect TItem="TagItem" Items="_tagItems" TType="string" Multiple="true" @bind-Value="_tagValue" Data="_tagOptions" TextField="@(item => item.Name)" ValueField="@(item => item.Id)" Placeholder=""  persist= "false" Create = "true" Configuration="_configuration2" />
                        }
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-light" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary">Add Task</button>
            </div>
        </div>
    </div>
</div>
<!-- End::add task modal -->

<!-- Dragula JS -->
<script src="../assets/libs/dragula/dragula.min.js"></script>
 <!-- Simplebar JS -->
<script src="@Assets["assets/libs/simplebar/simplebar.min.js"]"></script>

<script>
    var drag = dragula([
        document.querySelector('#new-tasks-draggable'),
        document.querySelector('#todo-tasks-draggable'),
        document.querySelector('#inprogress-tasks-draggable'),
        document.querySelector('#inreview-tasks-draggable'),
        document.querySelector('#completed-tasks-draggable')
    ]);

    drag.on('dragend', function (el) {
        let containers = [
            document.querySelector('#new-tasks-draggable'),
            document.querySelector('#todo-tasks-draggable'),
            document.querySelector('#inprogress-tasks-draggable'),
            document.querySelector('#inreview-tasks-draggable'),
            document.querySelector('#completed-tasks-draggable')
        ];

        containers.map((ele) => {
            if (ele) {
                // Filter out the background image
                const visibleTasks = Array.from(ele.children).filter(child => 
                    !child.classList.contains('task-null-background')
                );

                const viewBtn = document.querySelector(`#${ele.getAttribute("data-view-btn")}`);
                const sibling = viewBtn ? viewBtn.nextElementSibling : null;

                if (visibleTasks.length === 0) {
                    ele.classList.add("task-Null");
                    if (sibling) sibling.classList.add("d-none");
                } else {
                    ele.classList.remove("task-Null");
                    if (sibling) sibling.classList.remove("d-none");
                }
            }
        });
    });
</script>


@code{
    
    // Date picker Start//
    public Flatpickr? _flatpickr;
    // Date picker End//

    private bool isRendered = false;  
    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            isRendered = true;
            await Task.Delay(0);
            StateHasChanged(); 
        }
    }

    // Filepond Start //
    private FilePond? FilePond { get; set; }
    private readonly FilePondOptions _Attachments = new()
    {
        MaxFiles = 6,
        EnabledPlugins = [FilePondPluginType.ImagePreview, FilePondPluginType.MediaPreview]
    };

    private TomSelect<SelectItem, string> _selectedValue = default!;
    private List<SelectItem>? _assignedToOptions;      
    private List<SelectItem>? _sortByOptions;      
    private List<SelectItem> _selectedItems = new List<SelectItem>();    
    public class SelectItem
    {
        public string? Id { get; set; }
        public string? Name { get; set; }
        public bool Selected { get; set; }
    }

    
    private TomSelect<TagItem, string> _tagValue = default!;
    private List<TagItem>? _tagOptions;   
    private List<TagItem> _tagItems = new List<TagItem>();    
    public class TagItem
    {
        public string? Id { get; set; }
        public string? Name { get; set; }
        public bool Selected { get; set; }
    } 

    private readonly TomSelectConfiguration _configuration = new()
    {
        Plugins = new List<TomSelectPluginType> { TomSelectPluginType.DropdownInput, TomSelectPluginType.NoBackspaceDelete }
    };
    private readonly TomSelectConfiguration _configuration2 = new()
    {
        Plugins = new List<TomSelectPluginType> { TomSelectPluginType.RemoveButton, TomSelectPluginType.NoBackspaceDelete }
    };
    protected override void OnInitialized() {

        _assignedToOptions = new List<SelectItem>
        {
            new SelectItem { Id = "0", Name = "Angelina May" },
            new SelectItem { Id = "1", Name = "Kiara advain" },
            new SelectItem { Id = "2", Name = "Hercules Jhon" },
            new SelectItem { Id = "3", Name = "Mayor Kim" },
        };
        _selectedItems = _assignedToOptions.Take(1).ToList();

        _sortByOptions = new List<SelectItem>
        {
            new SelectItem { Id = "0", Name = "Newest" },
            new SelectItem { Id = "1", Name = "Date Added" },
            new SelectItem { Id = "2", Name = "Type" },
            new SelectItem { Id = "3", Name = "A - Z" },
        };
        _selectedItems = _sortByOptions.Take(1).ToList();

         _tagOptions = new List<TagItem>
        {
            new TagItem { Id = "0", Name = "UI/UX" },
            new TagItem { Id = "1", Name = "Finance" },
            new TagItem { Id = "2", Name = "Designing" },
            new TagItem { Id = "3", Name = "Admin" },
            new TagItem { Id = "4", Name = "Authentication" },
            new TagItem { Id = "5", Name = "Product" },
            new TagItem { Id = "6", Name = "Development" },
        };
        _tagItems = _tagOptions.Take(3).ToList();  
    }
}
