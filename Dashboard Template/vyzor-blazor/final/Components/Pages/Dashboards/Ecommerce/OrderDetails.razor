@page "/ecommerce/orderdetails"

<!-- Start::page-header -->
<div class="page-header-breadcrumb mb-3">
    <div class="d-flex align-center justify-content-between flex-wrap">
        <h1 class="page-title fw-medium fs-18 mb-0">Order Details</h1>
        <ol class="breadcrumb mb-0">
            <li class="breadcrumb-item"><a href="javascript:void(0);">Dashboards</a></li>
            <li class="breadcrumb-item"><a href="javascript:void(0);">Ecommerce</a></li>
            <li class="breadcrumb-item active" aria-current="page">Order Details</li>
        </ol>
    </div>
</div>
<!-- End::page-header -->

<!-- Start::row-1 -->
<div class="row">
    <div class="col-xxl-9">
        <div class="row">
            <div class="col-xl-12">
                <div class="card custom-card overflow-hidden">
                    <div class="card-body p-0">
                        <div class="table-responsive">
                            <table class="table nowrap text-nowrap">
                                <thead>
                                    <tr>
                                        <th>Product</th>
                                        <th>SKU</th>
                                        <th class="text-center">Quantity</th>
                                        <th>Price Per Unit</th>
                                        <th class="text-end">Total</th>
                                    </tr>
                                </thead>
                                <tbody>                                
                                    @foreach (var item in OrderDetailsData)
                                    {
                                        <tr>
                                            <td>
                                                <div class="d-flex align-items-center gap-3">
                                                    <div class="lh-1">
                                                        <span class="avatar avatar-xxl">
                                                            <img src="@item.ImageSrc" alt="@item.ProductName" />
                                                        </span>
                                                    </div>
                                                    <div>
                                                        <span class="d-block text-muted mb-1">@item.Brand</span>
                                                        <h6 class="fw-semibold">@item.ProductName</h6>
                                                        <div class="d-flex align-items-center gap-2 fs-13">
                                                            <div>Color : <span class="fw-medium text-muted">@item.Color</span></div>
                                                            <div class="vr"></div>
                                                            <div>Size : <span class="fw-medium text-muted">@item.Size</span></div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="text-muted">@item.SKU</div>
                                            </td>
                                            <td class="product-quantity-container text-center">
                                                @item.Quantity
                                            </td>
                                            <td>
                                                $@item.UnitPrice
                                            </td>
                                            <td class="text-end">
                                                $@item.TotalPrice
                                            </td>
                                        </tr>
                                    }
                                    <tr>
                                        <td colspan="3" class="border-bottom-0"></td>
                                        <td colspan="2" class="border-bottom-0">
                                            <table class="table table-sm text-nowrap mb-0 table-borderless">
                                                <tbody>
                                                    <tr>
                                                        <td scope="row">
                                                            Sub Total :
                                                        </td>
                                                        <td class="text-end">
                                                            <span class="mb-0 fw-medium">$419.97</span>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td scope="row">
                                                            Avail Discount :
                                                        </td>
                                                        <td class="text-end">
                                                            <span class="mb-0 fw-medium">-$30.00</span>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td scope="row">
                                                            Coupon Discount :
                                                        </td>
                                                        <td class="text-end">
                                                            <span class="mb-0 fw-medium">-$41.99</span>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td scope="row">
                                                            Vat :
                                                        </td>
                                                        <td class="text-end">
                                                            <span class="mb-0 fw-medium">$67.99</span>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td scope="row">
                                                            Total :
                                                        </td>
                                                        <td class="text-end">
                                                            <span class="mb-0 fw-medium fs-15">$415.97</span>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-xl-7">
                <div class="card custom-card">
                    <div class="card-header">
                        <div class="card-title">
                            Order Activity
                        </div>
                    </div>
                    <div class="card-body">
                        <ul class="list-unstyled order-activity-list">
                            @foreach (var item in OrderActivityData)
                            {
                                <li class="@((item.IsPending && !item.IsVisible)? "pending" : "")">
                                    <div class="d-flex align-items-start justify-content-between">
                                        <div class="w-50">
                                            <h6 class="fw-medium mb-1">@item.Title</h6>
                                            <div class="text-muted @(item.IsVisible? "" : "d-none")">@item.Description</div>
                                        </div>
                                        <div class="fs-13 text-end @(item.IsVisible? "" : "d-none")">
                                            <span class="d-block mb-1">@item.Timestamp?.ToString("MMMM dd, yyyy")</span>
                                            <span class="d-block text-muted">@item.Timestamp?.ToString("h:mm tt")</span>
                                        </div>
                                    </div>
                                </li>
                            }
                        </ul>
                    </div>
                </div>
            </div>
            <div class="col-xl-5">
                <div class="card custom-card">
                    <div class="card-header justify-content-between">
                        <div class="card-title">
                            Billing Address
                        </div>
                        <a href="javascript:void(0);"
                            class="btn btn-primary-light btn-sm  d-inline-flex align-items-center justify-content-center"><i
                                class="ti ti-edit me-1"></i>Edit</a>
                    </div>
                    <div class="card-body">
                        <span class="d-block fw-medium mb-2">Tom Phillip</span>
                        <ul class="list-unstyled order-address-list">
                            <li>9876 Maple Avenue, Unit 12C</li>
                            <li>New York, NY 10001</li>
                            <li>United States</li>
                            <li>(212) 555-0987</li>
                        </ul>
                    </div>
                </div>
                <div class="card custom-card">
                    <div class="card-header justify-content-between">
                        <div class="card-title">
                            Shipping Address
                        </div>
                        <a href="javascript:void(0);"
                            class="btn btn-primary-light btn-sm  d-inline-flex align-items-center justify-content-center"><i
                                class="ti ti-edit me-1"></i>Edit</a>
                    </div>
                    <div class="card-body">
                        <span class="d-block fw-medium mb-2">Tom Phillip</span>
                        <ul class="list-unstyled order-address-list mb-3">
                            <li>9876 Maple Avenue, Unit 12C</li>
                            <li>New York, NY 10001</li>
                            <li>United States</li>
                            <li>(212) 555-0987</li>
                        </ul>
                        <span class="d-block fw-medium mb-2">Visa Card</span>
                        <span class="d-block">**** **** **** 1234</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-xxl-3">
        <div class="row">
            <div class="col-xl-12">
                <div class="card custom-card overflow-hidden">
                    <div class="card-header justify-content-between">
                        <div class="card-title">Customer Details</div>
                        <span class="badge bg-primary-transparent fs-13">18 Orders</span>
                    </div>
                    <div class="card-body p-0">
                        <ul class="list-group list-group-flush">                     
                            @foreach (var detail in CustomerDetails)
                            {
                                <li class="list-group-item">
                                    <div class="d-flex align-items-center justify-content-between">
                                        <div class="fs-13 text-muted">
                                            <i class="@detail.IconClass me-2 fs-14"></i>@detail.Label
                                        </div>
                                        <div class="d-flex align-items-center gap-2">
                                            @if (detail.HasAvatar)
                                            {
                                                <div class="lh-1">
                                                    <span class="avatar avatar-sm avatar-rounded">
                                                        <img src="@detail.ImageSrc" alt="@detail.Value" />
                                                    </span>
                                                </div>
                                            }
                                            <div class="fw-medium">@detail.Value</div>
                                        </div>
                                    </div>
                                </li>
                            }
                        </ul>
                    </div>
                </div>
            </div>
            <div class="col-xl-12">
                <div class="card custom-card">
                    <div class="card-header">
                        <div class="card-title">
                            Payment Details
                        </div>
                    </div>
                    <div class="card-body p-0">
                        <ul class="list-group list-group-flush">
                            @foreach (var item in PaymentDetailsData)
                            {
                                <li class="list-group-item">
                                    <div class="d-flex align-items-center justify-content-between">
                                        <div class="fs-13 text-muted">
                                            @item.Label
                                        </div>
                                      <div class="text-end">
                                        @if (item.IsBadge)
                                        {
                                            <span class="@item.CssClass">@item.Value</span>
                                        }
                                        else
                                        {
                                            <div class="@item.CssClass">@item.Value</div>
                                        }
                                        </div>
                                    </div>
                                </li>
                            }
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!--End::row-1 -->

@code {

    //Order Activity
    public class OrderActivityItem
    {
        public string? Title { get; set; }
        public string? Description { get; set; }
        public DateTime? Timestamp { get; set; }
        public bool IsPending { get; set; }
        public bool IsVisible => Timestamp.HasValue;
    }
    private List<OrderActivityItem> OrderActivityData = new()
    {
        new OrderActivityItem
        {
            Title = "Order Placed",
            Description = "Order successfully placed and awaiting processing.",
            Timestamp = new DateTime(2025, 3, 15, 10, 30, 0),
            IsPending = false
        },
        new OrderActivityItem
        {
            Title = "Payment Confirmed",
            Description = "Payment successfully processed via Visa Card.",
            Timestamp = new DateTime(2025, 3, 15, 11, 15, 0),
            IsPending = false
        },
        new OrderActivityItem
        {
            Title = "Order Processed",
            Description = "The order has been processed and is ready for packing.",
            Timestamp = new DateTime(2025, 3, 15, 12, 0, 0),
            IsPending = false
        },
        new OrderActivityItem
        {
            Title = "Shipped",
            Description = "Order dispatched from the warehouse and handed over to the carrier.",
            Timestamp = new DateTime(2025, 3, 16, 8, 0, 0),
            IsPending = false
        },
        new OrderActivityItem
        {
            Title = "Out for Delivery",
            Description = "The package is on its way to the delivery address.",
            Timestamp = null,
            IsPending = true
        },
        new OrderActivityItem
        {
            Title = "Delivered",
            Description = "The order was successfully delivered to the customerâ€™s address.",
            Timestamp = null,
            IsPending = true
        }
    };

    //Payment Details
    public class PaymentDetailItem
    {
        public string? Label { get; set; }
        public string? Value { get; set; }
        public string? CssClass { get; set; } = "fw-medium";
        public bool IsBadge { get; set; } = false;
    }

    private List<PaymentDetailItem> PaymentDetailsData = new()
    {
        new() { Label = "Order ID", Value = "#SPK202501" },
        new() { Label = "Payment Method", Value = "Credit Card" },
        new() { Label = "Card Number", Value = "**** **** **** 1234" },
        new() { Label = "Payment Status", Value = "Completed", CssClass = "badge bg-success-transparent fs-13", IsBadge = true },
        new() { Label = "Amount Paid", Value = "$389.99" },
        new() { Label = "Transaction ID", Value = "5678-ABC12345XYZ" },
        new() { Label = "Payment Date", Value = "March 15, 2025, 11:45 AM" }
    };

    //Order Details
    public class OrderDetail
    {
        public string? Brand { get; set; }
        public string? ProductName { get; set; }
        public string? ImageSrc { get; set; }
        public string? SKU { get; set; }
        public string? Color { get; set; }
        public string? Size { get; set; }
        public int Quantity { get; set; }
        public decimal UnitPrice { get; set; }
        public decimal TotalPrice => Quantity * UnitPrice;
    }
    List<OrderDetail> OrderDetailsData = new()
    {
        new OrderDetail
        {
            Brand = "Adidas",
            ProductName = "Adidas UltraBoost 2023",
            ImageSrc = "../assets/images/ecommerce/jpg/1.jpg",
            SKU = "ADI-UB-2023",
            Color = "Green",
            Size = "10 US",
            Quantity = 1,
            UnitPrice = 159.99m
        },
        new OrderDetail
        {
            Brand = "Nike",
            ProductName = "Nike Air Max 2025 Sneakers",
            ImageSrc = "../assets/images/ecommerce/jpg/4.jpg",
            SKU = "NIKE-AMX-2025",
            Color = "Teal",
            Size = "10 US",
            Quantity = 2,
            UnitPrice = 129.99m
        }
    };

    //Customer Details
    public class CustomerDetail
    {
        public string? Label { get; set; }
        public string? IconClass { get; set; }
        public string? Value { get; set; }
        public string? ImageSrc { get; set; }  // optional, only for avatar (e.g., Full Name)
        public bool HasAvatar => !string.IsNullOrEmpty(ImageSrc);
    }
    List<CustomerDetail> CustomerDetails = new()
    {
        new CustomerDetail
        {
            Label = "Full Name",
            IconClass = "ri-user-line",
            Value = "Tom Phillip",
            ImageSrc = "../assets/images/faces/12.jpg"
        },
        new CustomerDetail
        {
            Label = "Email",
            IconClass = "ri-mail-line",
            Value = "tomphillip23@gmail.com"
        },
        new CustomerDetail
        {
            Label = "Phone",
            IconClass = "ri-phone-line",
            Value = "(555) 123-4567"
        }
    };




}
