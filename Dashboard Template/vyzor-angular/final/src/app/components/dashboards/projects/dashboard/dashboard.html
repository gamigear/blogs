<app-breadcrumb title="Dashboards" sub_title="Projects" active_item="Dashboard"></app-breadcrumb>

<!-- Start:: row-1 -->
<div class="row">
  <div class="col-xxl-9">
    <div class="row">
      @for(card of dashboardCards;track $index){
      <div class="col-xl-3">
        <spk-project-card [project]="card"></spk-project-card>
      </div>
      }
      <div class="col-xl-12">
        <div class="card custom-card">
          <div class="card-header">
            <div class="card-title">
              Projects Overview
            </div>
          </div>
          <div class="card-body">
            <div id="projects-overview">
              <spk-apexcharts [chartOptions]="ProjectOptions"></spk-apexcharts>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="col-xxl-3">
    <div class="card custom-card overflow-hidden">
      <div class="card-header">
        <div class="card-title">
          Task Activity
        </div>
      </div>
      <div class="card-body">
        <div id="task-activity">
          <spk-apexcharts [chartOptions]="TaskOptions"></spk-apexcharts>
        </div>
      </div>
      <div class="card-footer p-0">
        <ul class="list-group list-group-flush project-task-activity-list">
          @for(task of TaskList;track $index){
          <li class="list-group-item">
            <div class="d-flex align-items-start gap-2">
              <div class="flex-fill">
                <span class="d-block fw-semibold task-type {{task.className}}">{{task.type}}</span>
                <span class="fs-12 text-muted">
                  {{ task.trend === 'increase' ? 'Increased' : 'Decreased' }} by
                  <span [ngClass]="{
                                    'mx-1': true,
                                    'text-success': task.trend === 'increase',
                                    'text-danger': task.trend !== 'increase'
                                  }">
                    {{ task.percentage }}
                  </span>
                  This year</span>
              </div>
              <div class="fw-semibold">{{task.count}}</div>
            </div>
          </li>
          }
        </ul>
      </div>
    </div>
  </div>
</div>
<!-- End:: row-1 -->

<!-- Start:: row-2 -->
<div class="row">
  <div class="col-xxl-3">
    <div class="card custom-card">
      <div class="card-header">
        <div class="card-title">
          Recent Activity
        </div>
      </div>
      <div class="card-body">
        <ul class="list-unstyled projects-recent-activity-list">
          @for(item of Recentupdates;track $index){
          <li>
            <div class="d-flex align-items-start gap-3">
              <div>
                <span class="avatar avatar-md avatar-rounded online">
                  <img [src]="item.avatar" alt={{item.name}}>
                </span>
              </div>
              <div class="flex-fill">
                <div class="d-flex align-items-start justify-content-between mb-1 flex-wrap">
                  <div class="d-block fw-semibold">{{item.name}}</div>
                  <span class="badge bg-light text-muted border">{{item.date}}</span>
                </div>
                <div class="descrption">{{item.description}}</div>
                @if (item.file) {
                <div class="p-1 border border-dotted rounded position-relative mt-1">
                  <a href="javascript:void(0);" class="stretched-link"></a>
                  <div class="d-flex align-items-center gap-2">
                    <span class="badge bg-success">{{item.file.type}}</span>
                    <span class="fs-11">{{item.file.name}}</span>
                  </div>
                </div>
                }
              </div>
            </div>
          </li>
          }
        </ul>
      </div>
    </div>
  </div>
  <div class="col-xxl-6">
    <div class="card custom-card overflow-hidden">
      <div class="card-header justify-content-between">
        <div class="card-title">
          Urgent Tasks
        </div>
        <spk-dropdowns [Customclass]="'dropdown '" [Toggletext]="'Today'" [Icon]="true"
          [IconClass]="'ri-arrow-down-s-line align-middle ms-1 d-inline-block'"
          [class]="' p-2 fs-12 border-0 text-muted no-caret '" [Menuclass]="'dropdown-menu '">
          <li><a class="dropdown-item" href="javascript:void(0);">Week</a></li>
          <li><a class="dropdown-item" href="javascript:void(0);">Month</a></li>
          <li><a class="dropdown-item" href="javascript:void(0);">Year</a></li>
        </spk-dropdowns>
      </div>
      <div class="card-body p-0">
        <div class="table-responsive">
          <spk-reusable-tables [columns]="projectColumn" tableClass="  text-nowrap" [showCheckbox]="false">
            @for(task of UrgentTasks;track $index){
            <tr>
              <td [ngClass]="$index === UrgentTasks.length - 1 ? 'border-bottom-0' : ''">
                <div class="d-flex align-items-center gap-2">
                  <div class="form-check mb-0">
                    <input class="form-check-input" type="checkbox" value="" id="urgent-task1">
                  </div>
                  <a href="javascript:void(0);" class="urgent-task-title">{{task.title}}</a>
                </div>
              </td>
              <td [ngClass]="$index === UrgentTasks.length - 1 ? 'border-bottom-0' : ''">
                {{task.dueDate}}
              </td>
              <td [ngClass]="$index === UrgentTasks.length - 1 ? 'border-bottom-0' : ''">
                <div class="avatar-list-stacked">
                  @for(imgSrc of task.avatars;track $index){
                  <span class="avatar avatar-xs avatar-rounded"> <img [src]="imgSrc" alt="img"></span>
                  }
                </div>
              </td>
              <td [ngClass]="$index === UrgentTasks.length - 1 ? 'border-bottom-0' : ''">
                {{task.priority}}
              </td>
              <td [ngClass]="$index === UrgentTasks.length - 1 ? 'border-bottom-0' : ''">
                <span class="badge {{task.statusClass}}">{{task.status}}</span>
              </td>
            </tr>
            }
          </spk-reusable-tables>
        </div>
      </div>
      <div class="card-footer custom-project-foot">
        <div class="d-flex align-items-center">
          <div> Showing 6 Entries <i class="bi bi-arrow-right ms-2 fw-semibold"></i> </div>
          <div class="ms-auto">
            <nav aria-label="Page navigation" class="pagination-style-2">
              <ul class="pagination mb-0 flex-wrap">
                <li class="page-item disabled">
                  <a class="page-link" href="javascript:void(0);">
                    Prev
                  </a>
                </li>
                <li class="page-item"><a class="page-link" href="javascript:void(0);">1</a></li>
                <li class="page-item active"><a class="page-link" href="javascript:void(0);">2</a></li>
                <li class="page-item">
                  <a class="page-link" href="javascript:void(0);">
                    <i class="bi bi-three-dots"></i>
                  </a>
                </li>
                <li class="page-item"><a class="page-link" href="javascript:void(0);">17</a></li>
                <li class="page-item">
                  <a class="page-link text-primary" href="javascript:void(0);">
                    next
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="col-xxl-3">
    <div class="card custom-card overflow-hidden">
      <div class="card-header">
        <div class="card-title">
          Recent Transactions
        </div>
      </div>
      <div class="card-body">
        <ul class="list-unstyled projects-recent-transactions-list">
          @for(tx of Transactions;track $index){
          <li>
            <div class="d-flex align-items-center gap-2">
              <div class="lh-1">
                <span class="avatar avatar-md avatar-rounded bg-{{tx.avatarColor}}-transparent">
                  {{ tx.name.charAt(0) }}
                </span>
              </div>
              <div class="flex-fill">
                <span class="d-block fw-semibold">{{tx.name}}</span>
                <span class="fs-13 text-muted">{{tx.dateTime}}</span>
              </div>
              <div class="text-end">
                <span class="d-block fw-semibold">{{tx.amount}}</span>
                <span class="fw-medium fs-13" [ngClass]="{
                    'text-success': tx.status === 'Completed',
                    'text-warning': tx.status === 'Pending',
                    'text-danger': tx.status !== 'Completed' && tx.status !== 'Pending'
                  }">{{tx.status}}</span>
              </div>
            </div>
          </li>
          }
        </ul>
      </div>
    </div>
  </div>
</div>
<!-- End:: row-2 -->

<!-- Start:: row-3 -->
<div class="row">
  <div class="col-xl-12">
    <div class="card custom-card">
      <div class="card-header justify-content-between">
        <div class="card-title">
          Projects Summary
        </div>
        <div class="d-flex flex-wrap gap-2">
          <div>
            <input class="form-control form-control-sm" type="text" placeholder="Search Here"
              aria-label=".form-control-sm example">
          </div>
          <spk-dropdowns [Customclass]="'dropdown '" [Toggletext]="'Sort By'" [Icon]="true" [placement]="'bottom-end'"
            [IconClass]="'ri-arrow-down-s-line align-middle ms-1 d-inline-block'"
            [class]="' btn btn-primary btn-sm btn-wave waves-effect waves-light no-caret '"
            [Menuclass]="'dropdown-menu '">
            <li><a class="dropdown-item" href="javascript:void(0);">New</a></li>
            <li><a class="dropdown-item" href="javascript:void(0);">Popular</a></li>
            <li><a class="dropdown-item" href="javascript:void(0);">Relevant</a></li>
          </spk-dropdowns>
        </div>
      </div>
      <div class="card-body p-0">
        <div class="table-responsive">
          <spk-reusable-tables [columns]="ProjectsSummaryColumn" tableClass="  text-nowrap" [showCheckbox]="true">
            @for(project of ProjectsSummary;track $index){
            <tr >
              <td>
                <input class="form-check-input" type="checkbox" id={{project.id}} value="" aria-label="...">
              </td>
              <td>{{project.name}}</td>
              <td>{{project.startDate}}</td>
              <td>{{project.endDate}}</td>
              <td>
                <span class="badge"
                  [ngClass]="'bg-' + (project.status === 'Completed' ? 'success' : 'primary') + '-transparent'">{{project.status}}</span>
              </td>
              <td>
                <div class="d-flex align-items-center">
                  <div class="progress progress-animate progress-xs w-100" role="progressbar" aria-valuenow="100"
                    aria-valuemin="0" aria-valuemax="100">
                    <div class="progress-bar progress-bar-striped progress-bar-animated bg-{{project.progressColor}}"
                      [style.width]="project.progress + '%'"></div>
                  </div>
                  <div class="ms-2">{{project.progress}}%</div>
                </div>
              </td>
              <td>
                <div class="avatar-list-stacked">
                  @for(avatar of project.avatars;track $index){
                  <span class="avatar avatar-xs avatar-rounded">
                    <img [src]="'./assets/images/faces/' + avatar" alt="img">
                  </span>
                  }
                  @if (project.moreAvatars) {
                  <a class="avatar avatar-xs bg-primary avatar-rounded text-fixed-white" href="javascript:void(0);">
                    +{{project.moreAvatars}}
                  </a>
                  }
                </div>
              </td>
              <td>{{project.amount}}</td>
              <td>
                <div class="btn-list">
                  <button class="btn btn-sm btn-icon btn-primary-light btn-wave">
                    <i class="ri-edit-line"></i>
                  </button>
                  <button class="btn btn-sm btn-icon btn-danger-light btn-wave">
                    <i class="ri-delete-bin-line"></i>
                  </button>
                </div>
              </td>
            </tr>
            }
          </spk-reusable-tables>
        </div>
      </div>
      <div class="card-footer">
        <div class="d-flex align-items-center">
          <div> Showing 6 Entries <i class="bi bi-arrow-right ms-2 fw-semibold"></i> </div>
          <div class="ms-auto">
            <nav aria-label="Page navigation" class="pagination-style-2">
              <ul class="pagination mb-0 flex-wrap">
                <li class="page-item disabled">
                  <a class="page-link" href="javascript:void(0);">
                    Prev
                  </a>
                </li>
                <li class="page-item"><a class="page-link" href="javascript:void(0);">1</a></li>
                <li class="page-item active"><a class="page-link" href="javascript:void(0);">2</a></li>
                <li class="page-item">
                  <a class="page-link" href="javascript:void(0);">
                    <i class="bi bi-three-dots"></i>
                  </a>
                </li>
                <li class="page-item"><a class="page-link" href="javascript:void(0);">17</a></li>
                <li class="page-item">
                  <a class="page-link text-primary" href="javascript:void(0);">
                    next
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- End:: row-3 -->
