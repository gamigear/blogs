<app-breadcrumb title="Dashboards" sub_title="Ecommerce" active_item="Customers List"></app-breadcrumb>
<!-- Start::row-1 -->
<div class="row">
  <div class="col-xl-12">
    <div class="card custom-card">
      <div class="card-header justify-content-between border-bottom-1 gap-2">
        <!-- Search Bar -->
        <div class="">
          <input class="form-control" (input)="onTableWithSearchChange($event)" type="search" id="search-input" placeholder="Search Customer"
            aria-label="search-customer">
        </div>

        <!-- Filters Section -->
        <div class="d-flex gap-sm-4 gap-2 flex-wrap w-sm-50 justify-content-end">

          <!-- Stock Filter -->
          <div class="status-custom">
            <spk-ng-select [options]="CustomerSelect" [id]="'status-filter'" [selectClass]="''" [clearable]="true"
              [searchable]="true" [hideSelected]="true" [placeholder]="'Customer Status'" [additionalProperties]="{}">
            </spk-ng-select>
          </div>
          <div class="">
            <spk-dropdowns [Customclass]="'dropdown d-grid'" [iconPosition]="'before'" [Icon]="true"
              [Toggletext]="'Export'" [IconClass]="'ri-upload-2-line me-1'"
              [class]="'btn btn-primary-light dropdown-toggle '" [Menuclass]="'dropdown-menu '">
              <li><a class="dropdown-item" href="javascript:void(0);"><i
                    class="bi bi-file-earmark-excel me-2"></i>Excel</a></li>
              <li><a class="dropdown-item" href="javascript:void(0);"><i
                    class="bi bi-file-earmark-excel me-2"></i>Csv</a></li>
              <li><a class="dropdown-item" href="javascript:void(0);"><i class="bi bi-filetype-pdf me-2"></i>PDF</a>
              </li>
              <li><a class="dropdown-item" href="javascript:void(0);"><i class="bi bi-file-zip me-2"></i>Zip</a></li>
            </spk-dropdowns>

          </div>

          <!-- Sort By Filter -->
          <div class=" d-grid">
            <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addtask" (click)="open(content)"><i
                class="ri ri-add-line me-1"></i>Add Customer</button>
          </div>
        </div>
      </div>

      <!-- Table inside the card-body -->
      <div class="card-body p-0">
        <div id="customers-list" class="grid-card-table table-responsive">

          <ngx-table #table [configuration]="configuration" [data]="data" [columns]="columns">

          </ngx-table>
        </div>
      </div>
    </div>
  </div>
</div>
<!--End::row-1 -->
<!-- Start:: Add new customer modal -->
<ng-template #content let-modal>
      <div class="modal-header">
        <h6 class="modal-title" id="mail-ComposeLabel">Add Customer</h6>
        <button type="button" class="btn-close" (click)="modal.close('cross click')" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body px-4">
        <div class="row gy-2">
          <div class="col-xl-12">
            <label for="customer-name" class="form-label">Customer Name</label>
            <input type="text" class="form-control" id="customer-name" placeholder="Customer Name">
          </div>
          <div class="col-xl-12">
            <label for="customer-email" class="form-label">Customer Email</label>
            <input type="email" class="form-control" id="customer-email" placeholder="Customer Email">
          </div>
          <div class="col-xl-12">
            <label class="form-label">Joined Date</label>
            <div class="form-group">
              <div class="input-group">
                <div class="input-group-text text-muted"> <i class="ri-calendar-line"></i> </div>
                <spk-flatpickr placeholder="Choose Date With Time" class="" [mode]="'single'" [altInput]="false"
              [convertModelValue]="true" [enableTime]="true" [dateFormat]="'Y-m-d H:i'"></spk-flatpickr>
              </div>
            </div>
          </div>
          <div class="col-xl-12">
            <label class="form-label">Status</label>
            <spk-ng-select [options]="StatusSelect" [id]="'choices-single-default1'" [selectClass]="'creative-nft-select'" [clearable]="true"
              [searchable]="true" [hideSelected]="true" [placeholder]="'Select'" [additionalProperties]="{}">
            </spk-ng-select>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-light" (click)="modal.close('cross click')" data-bs-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-primary">Add Customer</button>
      </div>
</ng-template>
<!-- End:: Add new customer modal -->
<ng-template #phoneTpl let-row>
  <span>
    <div class="d-flex align-items-center gap-3 position-relative">
      <a href="javascript:void(0);" class="stretched-link"></a>
      <div class="lh-1">
        <span class="avatar avatar-md">
          <img [src]="row.imgUrl" loading="lazy" alt="Customer Image">
        </span>
      </div>

      <div>
        <span class="d-block fw-semibold">{{ row.customerName }}</span>
        <span class="text-muted fs-13">{{ row.email }}</span>
      </div>
    </div>
  </span>
</ng-template>
<ng-template #Action let-column="column">
  <span>
    <spk-dropdowns [Customclass]="'dropdown '" [Icon]="true" [IconClass]="'fe fe-more-vertical'"
      [class]="'btn btn-icon btn-sm btn-primary-light border no-caret'" [Menuclass]="'dropdown-menu '">
      <li><a class="dropdown-item" href="javascript:void(0);"><i class="ri-pencil-line me-2"></i>Edit</a></li>
      <li><a class="dropdown-item btn-delete" href="javascript:void(0);"><i
            class="ri-delete-bin-line me-2"></i>Delete</a></li>
    </spk-dropdowns>
  </span>
</ng-template>
<ng-template #Status let-row>
  <span><span class="badge " [ngClass]="{
    'bg-success-transparent': row.status === 'Active',
    'bg-danger-transparent': row.status === 'Blocked'
  }">{{row.status}}</span></span>
</ng-template>
