<app-breadcrumb title="Dashboards" [subtitle]='false'  active_item="School"></app-breadcrumb>

<!-- Start:: row-1 -->
<div class="row">
  <div class="col-xxl-3">
    <div class="row">
      @for (card of cards; track card) {
        <div class="col-xxl-12 col-lg-6">
          <spk-school-card
            [title]="card.title"
            [value]="card.value"
            [trend]="card.trend"
            [icon]="card.icon"
            [bgColor]="card.bgColor"
            [trendColor]="card.trendColor">
          </spk-school-card>
        </div>
        }
    </div>
  </div>
  <div class="col-xxl-6">
    <div class="card custom-card">
      <div class="card-header">
        <div class="card-title">
          School Revenue
        </div>
      </div>
      <div class="card-body">
        <div id="school-revenue">
          <spk-apexcharts [chartOptions]="SchoolRevenue"></spk-apexcharts>
        </div>
      </div>
    </div>
  </div>
  <div class="col-xxl-3">
    <div class="card custom-card">
      <div class="card-header">
        <div class="card-title">
          Events
        </div>
      </div>
      <div class="card-body">
        <ul class="list-unstyled school-events-list">
          @for (event of events; track $index) {
            <li>
              <div class="d-flex align-items-center gap-3 flex-wrap flex-xxl-nowrap">
                <div class="lh-1">
                  <span class="avatar avatar-md bg-{{ event.bgColor }}-transparent">
                    <i class="{{ event.icon }} fs-5"></i>
                  </span>
                </div>
                <div class="flex-grow-1">
                  <div class="d-flex align-items-center gap-3 justify-content-between flex-wrap">
                    <span class="d-block fw-semibold">{{ event.title }}</span>
                    <span class="badge bg-light text-default border">{{ event.date }}</span>
                  </div>
                  <div class="text-muted fs-13 event-description">{{ event.description }}</div>
                </div>
              </div>
            </li>
          }
        </ul>
      </div>
    </div>
  </div>
</div>
<!-- End:: row-1 -->

<!-- Start:: row-2 -->
<div class="row">
  <div class="col-xxl-3">
    <div class="card custom-card">
      <div class="card-header">
        <div class="card-title">
          Students Activity
        </div>
      </div>
      <div class="card-body">
        <ul class="list-unstyled students-activity-list">
          @for (activity of activities; track $index) {
            <li>
              <div class="d-flex align-items-start gap-2">
                <div class="lh-1">
                  <span class="avatar avatar-md avatar-rounded" [ngClass]="activity.avatarBgColor ? activity.avatarBgColor : ''">
                    <!-- If there's an avatar image, display it; otherwise, show initials -->
                    @if (activity.avatar) {
                      <img [src]="activity.avatar" alt="img">
                    }
                    @if (!activity.avatar) {
                      <span>{{ activity.initials }}</span>
                    }
                  </span>
                </div>
                <div class="flex-fill">
                  <div class="d-flex align-items-start justify-content-between gap-3">
                    <span class="d-block fw-semibold">{{ activity.name }}</span>
                    <span class="badge bg-{{activity.dateBg}}-transparent">{{ activity.date }}</span>
                  </div>
                  <span class="fs-13 text-muted">{{ activity.description }}</span>
                </div>
              </div>
            </li>
          }
        </ul>
      </div>
    </div>
  </div>
  <div class="col-xxl-3">
    <div class="card custom-card">
      <div class="card-header">
        <div class="card-title">
          Students Overview
        </div>
      </div>
      <div class="card-body">
        <div id="students-overview">
          <spk-apexcharts [chartOptions]="studentsData"></spk-apexcharts>
        </div>
      </div>
      <div class="card-footer">
        <div class="row g-0">
          <div class="col border-end border-inline-end-dashed">
            <div class="text-center">
              <span class="student-overview-type boys">Boys</span>
              <h5 class="mb-0 mt-1 fw-semibold d-flex align-items-center justify-content-center gap-1">6,560
                <span class="badge bg-success-transparent rounded-pill  d-inline-flex align-items-center">
                  <i class="ti ti-arrow-up me-1"></i>2.45%
                </span>
              </h5>
            </div>
          </div>
          <div class="col">
            <div class="text-center">
              <span class="student-overview-type girls">Girls</span>
              <h5 class="mb-0 mt-1 fw-semibold d-flex align-items-center justify-content-center gap-1">3,354
                <span class="badge bg-danger-transparent rounded-pill  d-inline-flex align-items-center">
                  <i class="ti ti-arrow-down me-1"></i>6.76%
                </span>
              </h5>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="col-xxl-3">
    <div class="card custom-card overflow-hidden">
      <div class="card-header justify-content-between">
        <div class="card-title">
          Top Students
        </div>
        <a href="javascript:void(0);" class="text-muted fs-13">View All<i class="ti ti-arrow-narrow-right ms-1"></i></a>
      </div>
      <div class="card-body p-0">
        <ul class="list-group list-group-flush">
          @for (student of students; track $index) {
            <li class="list-group-item">
              <div class="d-flex align-items-center gap-2">
                <div class="lh-1">
                  <span class="avatar avatar-md ">
                    <img [src]="student.avatar" alt="Student Avatar">
                  </span>
                </div>
                <div class="flex-fill">
                  <span class="d-block fw-semibold">{{ student.name }}</span>
                  <span class="fs-13 text-muted">{{ student.grade }}</span>
                </div>
                <div class="text-end">
                  <span>GPA : <span class="fw-medium text-primary">{{ student.gpa }}</span></span>
                  <span class="text-{{student.achievementBg}} fs-13 d-block">{{ student.achievement }}</span>
                </div>
              </div>
            </li>
          }
        </ul>
      </div>
    </div>
  </div>
  <div class="col-xxl-3">
    <div class="card custom-card overflow-hidden">
      <div class="card-header justify-content-between">
        <div class="card-title">
          Students Fee Analytics
        </div>
        <a href="javascript:void(0);" class="text-muted fs-13">View All<i class="ti ti-arrow-narrow-right ms-1"></i></a>
      </div>
      <div class="card-body p-0">
        <div class="table-responsive">
          <spk-reusable-tables tableClass="table text-nowrap"  [showCheckbox]="false">
            @for (student of studentsFees; track $index) {
              <tr>
                <td [ngClass]="{'border-bottom-0': $index === studentsFees.length - 1}">{{ student.id }}</td>
                <td [ngClass]="{'border-bottom-0': $index === studentsFees.length - 1}">
                  <div class="d-flex align-items-center gap-2">
                    <div class="lh-1">
                      <span class="avatar avatar-md avatar-rounded">
                        <img [src]="student.avatar" alt="Student Avatar">
                      </span>
                    </div>
                    <div>
                      <span class="d-block fw-semibold lh-1 mb-1">{{ student.name }}</span>
                      <span class="fs-13 text-muted">{{ student.feeType }}</span>
                    </div>
                  </div>
                </td>
                <td class="text-end" [ngClass]="{'border-bottom-0': $index === studentsFees.length - 1}">
                  <span class="text-{{ student.status === 'Paid' ? 'success' : student.status === 'Pending' ? 'danger' : 'warning' }} fs-13 fw-semibold">
                    {{ student.status }}
                  </span>
                </td>
              </tr>
            }
          </spk-reusable-tables>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- End:: row-2 -->

<!-- Start:: row-3 -->
<div class="row">
  <div class="col-xxl-9">
    <div class="card custom-card">
      <div class="card-header justify-content-between">
        <div class="card-title">
          Student Summary
        </div>
        <div class="d-flex flex-wrap gap-2">
          <div>
            <input class="form-control form-control-sm" type="text" placeholder="Search Here" aria-label=".form-control-sm example">
          </div>
          <spk-dropdowns [Customclass]="'dropdown'" [Icon]="true" [title]="'Sort By'" [IconClass]="'ri-arrow-down-s-line align-middle ms-1 d-inline-block'"
            [class]="'btn btn-primary btn-sm btn-wave waves-effect waves-light no-caret'" [Menuclass]="'dropdown-menu'">
            <li><a class="dropdown-item" href="javascript:void(0);">New</a></li>
            <li><a class="dropdown-item" href="javascript:void(0);">Popular</a></li>
            <li><a class="dropdown-item" href="javascript:void(0);">Relevant</a></li>
          </spk-dropdowns>
        </div>
      </div>
      <div class="card-body p-0">
        <div class="table-responsive">
          <spk-reusable-tables [columns]="TransactionsHeader" tableClass="table text-nowrap"  [showCheckbox]="false">
            @for (student of studentsSummary; track $index) {
              <tr>
                <td>{{ student.id }}</td>
                <td>
                  <div class="d-flex align-items-center gap-2">
                    <div class="lh-1">
                      <span class="avatar avatar-sm avatar-rounded">
                        <img [src]="student.avatar" alt="Student Avatar">
                      </span>
                    </div>
                    <div class="fw-semibold">{{ student.name }}</div>
                  </div>
                </td>
                <td>{{ student.grade }}</td>
                <td>
                  <span class="badge"
                                      [ngClass]="{
                                        'bg-success': student.status === 'Paid',
                                        'bg-warning': student.status === 'Pending',
                                        'bg-danger': student.status === 'Overdue'
                                      }">
                    {{ student.status }}
                  </span>
                </td>
                <td>{{ student.performance.current }}</td>
                <td>{{ student.performance.previous }}</td>
                <td>{{ student.date }}</td>
                <td>{{ student.amount }}</td>
              </tr>
            }
          </spk-reusable-tables>
        </div>
      </div>
      <div class="card-footer ">
        <div class="d-flex align-items-center">
          <div> Showing 6 Entries <i class="bi bi-arrow-right ms-2 fw-semibold"></i> </div>
          <div class="ms-auto">
            <nav aria-label="Page navigation" class="pagination-style-2">
              <ul class="pagination mb-0 flex-wrap">
                <li class="page-item disabled">
                  <a class="page-link" href="javascript:void(0);">
                    Prev
                  </a>
                </li>
                <li class="page-item"><a class="page-link" href="javascript:void(0);">1</a></li>
                <li class="page-item active"><a class="page-link" href="javascript:void(0);">2</a></li>
                <li class="page-item">
                  <a class="page-link" href="javascript:void(0);">
                    <i class="bi bi-three-dots"></i>
                  </a>
                </li>
                <li class="page-item"><a class="page-link" href="javascript:void(0);">17</a></li>
                <li class="page-item">
                  <a class="page-link text-primary" href="javascript:void(0);">
                    next
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="col-xxl-3">
    <div class="card custom-card">
      <div class="card-header justify-content-between">
        <div class="card-title">
          Attendance Overview
        </div>
        <a href="javascript:void(0)" class="btn btn-primary-light btn-sm">View All</a>
      </div>
      <div class="card-body">
        <div id="attendance-overview">
          <spk-apexcharts [chartOptions]="AttendanceData"></spk-apexcharts>
        </div>
      </div>
      <div class="card-footer p-0">
        <div class="row mt-0 g-0">
          <div class="col-6 border-end border-inline-end-dashed text-center p-3">
            <p class="mb-1 fw-medium">Boys</p>
            <h5 class="text-warning fw-semibold mb-0">12.34K</h5>
          </div>
          <div class="col-6 text-center p-3">
            <p class="mb-1 fw-medium">Girls</p>
            <h5 class="text-primary fw-semibold mb-0">10.19K</h5>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- End:: row-3 -->










