<app-breadcrumb title="Applications" sub_title="Task" active_item="Kanban Board"></app-breadcrumb>

<!-- Start:: row-1 -->
<div class="row">
  <div class="col-xl-12">
    <div class="card custom-card">
      <div class="card-body p-3">
        <div class="d-sm-flex align-items-center flex-wrap gap-3 kanban-header justify-content-between">
          <div class="d-sm-flex align-items-center flex-wrap gap-3 w-sm-50 mb-sm-0 mb-3">
            <div class="mb-sm-0 mb-3">
              <button (click)="open(content1)" class="btn btn-primary me-2" data-bs-toggle="modal"
                data-bs-target="#add-board"><i class="ri-add-line me-1 fw-medium align-middle"></i>New Board</button>
            </div>
            <div>
              <div class="avatar-list-stacked">
                <span class="avatar avatar-sm avatar-rounded">
                  <img src="./assets/images/faces/2.jpg" alt="img">
                </span>
                <span class="avatar avatar-sm avatar-rounded">
                  <img src="./assets/images/faces/8.jpg" alt="img">
                </span>
                <span class="avatar avatar-sm avatar-rounded">
                  <img src="./assets/images/faces/2.jpg" alt="img">
                </span>
                <span class="avatar avatar-sm avatar-rounded">
                  <img src="./assets/images/faces/10.jpg" alt="img">
                </span>
                <span class="avatar avatar-sm avatar-rounded">
                  <img src="./assets/images/faces/4.jpg" alt="img">
                </span>
                <span class="avatar avatar-sm avatar-rounded">
                  <img src="./assets/images/faces/13.jpg" alt="img">
                </span>
                <a class="avatar avatar-sm bg-primary avatar-rounded text-fixed-white" href="javascript:void(0);">
                  +8
                </a>
              </div>
            </div>
          </div>
          <div class="d-sm-flex align-items-center flex-wrap justify-content-end gap-3">
            <spk-ng-select [options]="Project" [id]="'choices-single-default'" [selectClass]="''" [clearable]="true"
              [searchable]="true" [hideSelected]="true" [placeholder]="'Sort By'" [additionalProperties]="{}">
            </spk-ng-select>


            <div class="d-flex mt-sm-0 mt-3" role="search">
              <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
              <button class="btn btn-light" type="submit">Search</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- End:: row-1 -->

<!-- Start::row-2 -->
<div class="VYZOR-kanban-board">
  <div class="kanban-tasks-type new">
    <div class="mb-3">
      <div class="d-flex justify-content-between align-items-center">
        <span class="d-block fw-medium fs-15">New - 04</span>
        <div>
          <a aria-label="anchor" href="javascript:void(0)" class="btn btn-sm bg-white text-default border btn-wave"
            (click)="open(content)" data-bs-toggle="modal" data-bs-target="#add-task">
            <i class="ri-add-line align-middle me-1 fw-medium"></i>Add Task
          </a>
        </div>
      </div>
    </div>
    <overlay-scrollbars>
      <div class="kanban-tasks" id="new-tasks">
        <div id="new-tasks-draggable" data-view-btn="new-tasks" [sortablejs]="KanbanCards" [class.task-Null]="KanbanCards.length === 0"
          [sortablejsOptions]="NewTasksOptions">

          @for(kanban of KanbanCards;track kanban){
          <spk-kanbanboard-card [kanban]="kanban" [cardClass]="'mb-3'">
          </spk-kanbanboard-card>
          }


        </div>
      </div>
    </overlay-scrollbars>

    <div class="d-grid view-more-button mt-3" [class.d-none]="KanbanCards.length === 0">
      <button class="btn btn-primary-light btn-wave">View More</button>
    </div>
  </div>
  <div class="kanban-tasks-type todo">
    <div class="mb-3">
      <div class="d-flex justify-content-between align-items-center">
        <span class="d-block fw-medium fs-15">Todo - 36</span>
        <div>
          <a aria-label="anchor" href="javascript:void(0)" class="btn btn-sm bg-white text-default border btn-wave"
            (click)="open(content)" data-bs-toggle="modal" data-bs-target="#add-task">
            <i class="ri-add-line align-middle me-1 fw-medium"></i>Add Task
          </a>
        </div>
      </div>
    </div>
    <overlay-scrollbars>
      <div class="kanban-tasks" id="todo-tasks">
        <div id="todo-tasks-draggable" data-view-btn="todo-tasks" [sortablejs]="kanbanCardswarning" [class.task-Null]="kanbanCardswarning.length === 0"
          [sortablejsOptions]="TodoTasksOptions">


          @for(kanban of kanbanCardswarning;track kanban){
          <spk-kanbanboard-card [kanban]="kanban" [cardClass]="'mb-3'">
          </spk-kanbanboard-card>
          }


        </div>
      </div>
    </overlay-scrollbars>

    <div class="d-grid view-more-button mt-3" [class.d-none]="kanbanCardswarning.length === 0">
      <button class="btn btn-warning-light btn-wave">View More</button>
    </div>
  </div>
  <div class="kanban-tasks-type in-progress">
    <div class="mb-3">
      <div class="d-flex justify-content-between align-items-center">
        <span class="d-block fw-medium fs-15">On Going - 25</span>
        <div>
          <a aria-label="anchor" href="javascript:void(0)" class="btn btn-sm bg-white text-default border btn-wave"
            (click)="open(content)" data-bs-toggle="modal" data-bs-target="#add-task">
            <i class="ri-add-line align-middle me-1 fw-medium"></i>Add Task
          </a>
        </div>
      </div>
    </div>
    <overlay-scrollbars>
      <div class="kanban-tasks" id="inprogress-tasks">
        <div id="inprogress-tasks-draggable" data-view-btn="inprogress-tasks" [sortablejs]="kanbanCardsinfo" [class.task-Null]="kanbanCardsinfo.length === 0"
          [sortablejsOptions]="InProgressTasksOptions">


          @for(kanban of kanbanCardsinfo;track kanban){
          <spk-kanbanboard-card [kanban]="kanban" [cardClass]="'mb-3'">
          </spk-kanbanboard-card>
          }


        </div>
      </div>
    </overlay-scrollbars>
    <div class="d-grid view-more-button mt-3" [class.d-none]="kanbanCardsinfo.length === 0">
      <button class="btn btn-info-light btn-wave">View More</button>
    </div>
  </div>
  <div class="kanban-tasks-type inreview">
    <div class="mb-3">
      <div class="d-flex justify-content-between align-items-center">
        <span class="d-block fw-medium fs-15">In Review - 02</span>
        <div>
          <a aria-label="anchor" href="javascript:void(0)" class="btn btn-sm bg-white text-default border btn-wave"
            (click)="open(content)" data-bs-toggle="modal" data-bs-target="#add-task">
            <i class="ri-add-line align-middle me-1 fw-medium"></i>Add Task
          </a>
        </div>
      </div>
    </div>
    <overlay-scrollbars>
      <div class="kanban-tasks" id="inreview-tasks">
        <div id="inreview-tasks-draggable" data-view-btn="inreview-tasks" [sortablejs]="kanbanCardsdanger" [class.task-Null]="kanbanCardsdanger.length === 0"
          [sortablejsOptions]="InReviewTasksOptions">

          @for(kanban of kanbanCardsdanger;track kanban){
          <spk-kanbanboard-card [kanban]="kanban" [cardClass]="'mb-3'">
          </spk-kanbanboard-card>
          }


        </div>
      </div>
    </overlay-scrollbars>
    <div class="d-grid view-more-button mt-3" [class.d-none]="kanbanCardsdanger.length === 0">
      <button class="btn btn-danger-light btn-wave">View More</button>
    </div>
  </div>
  <div class="kanban-tasks-type completed">
    <div class="mb-3">
      <div class="d-flex justify-content-between align-items-center">
        <span class="d-block fw-medium fs-15">Completed - 36</span>
        <div>
          <a aria-label="anchor" href="javascript:void(0)" class="btn btn-sm bg-white text-default border btn-wave"
            (click)="open(content)" data-bs-toggle="modal" data-bs-target="#add-task">
            <i class="ri-add-line align-middle me-1 fw-medium"></i>Add Task
          </a>
        </div>
      </div>
    </div>
    <overlay-scrollbars>
      <div class="kanban-tasks" id="completed-tasks">
        <div id="completed-tasks-draggable" data-view-btn="completed-tasks" [sortablejs]="kanbanCardsuccess" [class.task-Null]="kanbanCardsuccess.length === 0"
          [sortablejsOptions]="CompletedTasksOptions">

          @for(kanban of kanbanCardsuccess;track kanban){
          <spk-kanbanboard-card [kanban]="kanban" [cardClass]="'mb-3'">
          </spk-kanbanboard-card>
          }


        </div>
      </div>
    </overlay-scrollbars>

    <div class="d-grid view-more-button mt-3" [class.d-none]="kanbanCardsuccess.length === 0">
      <button class="btn btn-success-light btn-wave">View More</button>
    </div>
  </div>
</div>
<!--End::row-2 -->

<!-- Start::add board modal -->
<ng-template #content1 let-modal>
  <div class="modal-header">
    <h6 class="modal-title">Add Board</h6>
    <button (click)="modal.close('cross click')" type="button" class="btn-close" data-bs-dismiss="modal"
      aria-label="Close"></button>
  </div>
  <div class="modal-body px-4">
    <div class="row">
      <div class="col-xl-12">
        <label for="board-title" class="form-label">Task Board Title</label>
        <input type="text" class="form-control" id="board-title" placeholder="Board Title">
      </div>
    </div>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-light" data-bs-dismiss="modal"
      (click)="modal.close('cross click')">Cancel</button>
    <button type="button" class="btn btn-primary">Add Board</button>
  </div>
</ng-template>

<!-- End::add board modal -->

<!-- Start::add task modal -->
<ng-template #content let-modal>
  <div class="modal-header">
    <h6 class="modal-title">Add Task</h6>
    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"
      (click)="modal.close('cross click')"></button>
  </div>
  <div class="modal-body px-4">
    <div class="row gy-2">
      <div class="col-xl-6">
        <label for="task-name" class="form-label">Task Name</label>
        <input type="text" class="form-control" id="task-name" placeholder="Task Name">
      </div>
      <div class="col-xl-6">
        <label for="task-id" class="form-label">Task ID</label>
        <input type="text" class="form-control" id="task-id" placeholder="Task ID">
      </div>
      <div class="col-xl-12">
        <label for="text-area" class="form-label">Task Description</label>
        <textarea class="form-control" id="text-area" rows="2" placeholder="Write Description"></textarea>
      </div>
      <div class="col-xl-12">
        <label for="text-area" class="form-label">Task Images</label>
        <file-pond multiple class="product-documents" data-allow-reorder="true" data-max-file-size="3MB"
          data-max-files="6" [options]="pondOptions" [files]="pondFiles" (oninit)="pondHandleInit()"
          (onaddfile)="pondHandleAddFile($event)" (onactivatefile)="pondHandleActivateFile($event)">
        </file-pond>
      </div>
      <div class="col-xl-12">
        <label class="form-label">Assigned To</label>
        <spk-ng-select [options]="Assigned" [id]="'choices-single-default'" [selectClass]="''" [multiple]="true"
          [clearable]="true" [searchable]="true" [hideSelected]="true" [additionalProperties]="{}">
        </spk-ng-select>
      </div>
      <div class="col-xl-6">
        <label class="form-label">Target Date</label>
        <div class="form-group">
          <div class="input-group">
            <div class="input-group-text text-muted"> <i class="ri-calendar-line"></i> </div>
            <spk-flatpickr placeholder="Choose Date With Time" class="" [mode]="'single'" [altInput]="false"
              [convertModelValue]="true" [enableTime]="true" [dateFormat]="'Y-m-d H:i'"></spk-flatpickr>
          </div>
        </div>
      </div>
      <div class="col-xl-6">
        <label class="form-label">Tags</label>
        <spk-ng-select [options]="Tags" [id]="'choices-multiple-remove-button2'" [selectClass]="''" [multiple]="true"
          [clearable]="true" [searchable]="true" [hideSelected]="true" [placeholder]="'Select Tag'"
          [additionalProperties]="{}">
        </spk-ng-select>
      </div>
    </div>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-light" data-bs-dismiss="modal"
      (click)="modal.close('cross click')">Cancel</button>
    <button type="button" class="btn btn-primary">Add Task</button>
  </div>
</ng-template>

<!-- End::add task modal -->
